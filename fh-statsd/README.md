fh-statsd(1) -- The FeedHenry Stats Server
====================================================

## Description

A stats server that collects stats generated by you cloud app such as Gauges and Counters. These are then displayed in the FeedHenry studio under you cloud app's stats section.

## Dependencies

Messaging currently relies on the following being installed on a host:

* node.js

* npm (the Node Package Manager)

## Installation

fh-statsd is deployed using npm. The statsd package (fh-statsd-<version>.tar.gz) can be installed via npm, either by copying the package to the local host or installing over http.

To install (on ubuntu):

sudo npm install fh-statsd-<version>.tar.gz
    
The necessary node dependency modules are also installed automatically.

You can upgrade an existing intallation with the same command.    

## Running and Configuration  

To run the Statsd Server you must pass a config file on the command line. For a sample configuration file, see 'dev.json' in the config directory.

E.g:
fh-stats /etc/feedhenry/fh-statsd/conf.json

## Upstart

Create a file called 'fh-statsd.conf' in the /etc/init directory, and put in the following:

    pre-start script
        mkdir -p /var/log/feedhenry/fh-statsd/
    end script

    description "FeedHenry statsd Server"
    author  "FeedHenry Ltd"

    start on (local-filesystems and net-device-up IFACE=eth0)
    stop on shutdown

    respawn

    exec sudo fh-statsd /etc/feedhenry/fh-statsd/conf.json >> /var/log/feedhenry/fh-statsd/fh-statsd.log 2>&1

The fh-statsd server can then be started/stopped with 
    sudo start fh-statsd
    sudo stop fh-statsd



